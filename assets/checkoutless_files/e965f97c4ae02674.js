(function(){if(typeof window.ometria!="undefined"&&typeof ometria.init=="function"){return}if(typeof window.ometria!="undefined"){window.ometria.init=function(){}}var n=navigator.cookieEnabled||("cookie" in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1));if(!n){return}if(window.navigator&&window.navigator.loadPurpose==="preview"){return}if(window.location.hash=="#om_debug"){r("OMdebug","1",1)}if(window.location.hash=="#om_debug=off"){r("OMdebug","0",-1)}var J=(g("OMdebug")=="1");_log=[];function o(am){_log.push(am)}function O(am,an){_log.push([am,an])}function ac(am){_log.push(am)}var U={key:"e965f97c4ae02674",endpoint:"//trk.ometria.com/track/",plugins:["magento-with-extension","rad-popup","uv-basic"],callback_timeout:250,cookie_expire_days:365,session_timeout:1800,api_version:3,payment_domains:["worldpay","paypal","myshopify"],cookie_domain:".rad.co",remove_domain_prefixes:["www."],page_types:[],external_campaign_plugins:[],extra_plugin_code:"",cart_deeplink_url:null};U.endpoint="https:"+U.endpoint;if(window.location.host.indexOf("localhost")>-1){U.endpoint="http://trk.ometria.localhost/track/"}if(U.key=="aandjglobal"||U.key=="shopvapes"||U.key=="extremepeptide_ca"){U.endpoint="https://d201620x8sndks.cloudfront.net/track/"}var u=[];if(J){var ah=null;var E=[];function t(){if(!document.body){return null}ah=document.createElement("div");ah.style.border="1px solid #000";ah.style.position="absolute";ah.style.top="0px";ah.style.right="0px";ah.style.background="#666";ah.style.padding="0px";ah.style.color="#333";ah.style.zIndex=99999;ah.style.width="250px";ah.style.maxHeight="400px";ah.style.overflow="auto";document.body.appendChild(ah)}function V(am,ao){var an="Event: "+am;if(am=="pageview"){an+=" ("+ao.type;if(ao.type=="product"){an+=" #"+ao.pid}an+=")"}if(am=="transaction"){an+=" ("+ao.tid+")"}if(am=="checkout"){an+=" ("+ao.stage+")"}return an}function p(ao,an){if(!ah){t()}if(ah){if(E.length){for(var am=0;am<E.length;am++){c(E[am][0],E[am][1])}E=[]}c(ao,an)}else{E.push([ao,an])}}function c(ap,ao){try{var am=document.createElement("div");am.style.border="1px solid #000";am.style.fontSize="11px";am.style.padding="3px";am.style.margin="3px";am.style.background="#fff";am.innerHTML=""+ap;if(ao){am.addEventListener("click",function(aq){console.log(ao)})}ah.appendChild(am);return am}catch(an){}}o=function(am){p(am)};O=function(am,an){p(V(am,an),an)};ac=function(am){console.log(am)}}function W(an){var am={};am.contains=function(ao){return(typeof an[ao]!=="undefined")};am.get=function(ao){return an[ao]};am.set=function(ap,ao){an[ap]=ao};am.toObject=function(){var ap={};for(var ao in an){if(an.hasOwnProperty(ao)){ap[ao]=an[ao]}}return ap};return am}function aj(am,ap){ap=ap||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var an="";for(var ao=0;ao<am;ao++){var aq=Math.floor(Math.random()*ap.length);an+=ap.substring(aq,aq+1)}return an}function y(an,am){for(var ao in am){an[ao]=am[ao]}return an}function ak(an,am){if(an&&an.push){m(an,am)}else{if(typeof an=="object"){k(an,am)}}}function k(ao,an){for(var am in ao){if(ao.hasOwnProperty(am)){an(am,ao[am])}}}function m(ao,an){for(var am=0;am<ao.length;am++){an(am,ao[am])}}function x(an,am){return(an.constructor===Array)?G(an,am):j(an,am)}function j(ap,ao){var an={};for(var am in ap){if(ap.hasOwnProperty(am)){an[am]=ao(ap[am],am)}}return an}function G(ap,ao){var am=[];for(var an=0;an<ap.length;an++){am[an]=ao(ap[an],an)}return am}function h(am){if(typeof am=="undefined"){return""}return am.replace(/^\s+|\s+$/g,"")}function ag(am){if(typeof am=="undefined"){am=window.location.href}am=am+"";am=am.split("#")[0];return am}function B(am){if(!am){return null}var ap=am.split("/");if(ap.length<3){return null}var aq=ap[2];for(var an=0;an<U.remove_domain_prefixes.length;an++){var ao=U.remove_domain_prefixes[an];aq=aq.replace(ao,"")}aq=aq.split(":")[0];return aq}function S(am){var an=/\S+@\S+\.\S+/;return an.test(am)}function l(an){var ao=document.getElementsByTagName("head")[0];var am=document.createElement("script");am.type="text/javascript";am.src=an;ao.appendChild(am)}function X(an){var am=new Image();am.src=an}var ae={_keyStr:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=",encode:function(ao){var am="";var aw,au,ar,av,at,aq,ap;var an=0;ao=ae._utf8_encode(ao);while(an<ao.length){aw=ao.charCodeAt(an++);au=ao.charCodeAt(an++);ar=ao.charCodeAt(an++);av=aw>>2;at=((aw&3)<<4)|(au>>4);aq=((au&15)<<2)|(ar>>6);ap=ar&63;if(isNaN(au)){aq=ap=64}else{if(isNaN(ar)){ap=64}}am=am+ae._keyStr.charAt(av)+ae._keyStr.charAt(at)+ae._keyStr.charAt(aq)+ae._keyStr.charAt(ap)}return am},_utf8_encode:function(an){an=an.replace(/\r\n/g,"\n");var am="";for(var ap=0;ap<an.length;ap++){var ao=an.charCodeAt(ap);if(ao<128){am+=String.fromCharCode(ao)}else{am+="\\u"+("0000"+ao.toString(16)).slice(-4)}}return am}};function K(am){if(am.indexOf("?")==-1){return W({})}qstr=am.substring(am.indexOf("?")+1);return aa(qstr)}function aa(an){if(an.indexOf("?")==0){an=an.substring(an.indexOf("?")+1)}an=an.replace(/&amp;/g,"&");an=an.replace(/\+/g,"%20");var ar={};var ao=an.split(/\?|&/);for(var aq=0;aq<ao.length;aq++){var am=ao[aq].split("=");try{ar[decodeURIComponent(am[0])]=decodeURIComponent(am[1])}catch(at){try{am[0]=am[0].replace(/%[0-9A-Z][0-9A-Z]/,"");am[1]=am[1].replace(/%[0-9A-Z][0-9A-Z]/,"");ar[decodeURIComponent(am[0])]=decodeURIComponent(am[1])}catch(ap){}}}return W(ar)}function q(ao,an,am){if(ao&&typeof ao=="object"){ak(ao,function(aq,ap){q(ap,an?an+"["+aq+"]":aq,am)})}else{if(typeof ao!="undefined"){am.push(encodeURIComponent(an)+"="+encodeURIComponent(ao))}}}function N(an){var am=[];q(an,"",am);return am.join("&")}function r(an,ap,am,ao){var aq=new Date();var ar=an+"="+escape(ap);if(am){aq.setDate(aq.getDate()+am);ar+=";expires="+aq.toGMTString()}if(ao){ar+=";domain="+ao}ar+=";path=/";document.cookie=ar}function g(am){var an=document.cookie+"";if(an.length>0){var ao=an.indexOf(am+"=");if(ao!=-1){ao=ao+am.length+1;c_end=an.indexOf(";",ao);if(c_end==-1){c_end=an.length}return unescape(an.substring(ao,c_end))}}return false}function z(am,an){r(am,"",-1,an)}function s(am,ao,an){this.name=am;this.saveto=null;this.changed=false;this.life=ao;this.domain=an;this.existed=false;this.data=W({});this.load()}s.prototype.get=function(am,an){if(!this.data.contains(am)){return an}return this.data.get(am)};s.prototype.getInt=function(am,an){return parseInt(this.get(am,an))};s.prototype.set=function(am,an){this.changed=true;this.data.set(am,an);this.saveSoon()};s.prototype.saveSoon=function(am,ao){var an=this;if(this.saveto){clearTimeout(this.saveto)}this.saveto=setTimeout(function(){an.saveto=null;an.save()},5)};s.prototype.inc=function(am,ao){var an=this.getInt(am)||0;ao=ao||1;this.set(am,an+ao)};s.prototype.load=function(){var am=g(this.name);if(!am){return}this.existed=true;this.data=aa(am)};s.prototype.save=function(){if(this.saveto){clearTimeout(this.saveto);this.saveto=null}r(this.name,N(this.data.toObject()),this.life,this.domain);this.checkforDoubleCookie();this.changed=false};s.prototype.checkforDoubleCookie=function(){var an=document.cookie.indexOf(this.name+"=");if(an==-1){return}var am=document.cookie.indexOf(this.name+"=",an+1);if(am==-1){return}var ao=location.hostname;if(this.domain!=ao){o("Erase cookie");z(this.name,ao);z(this.name,"")}};s.prototype.saveIfDirty=function(){if(this.changed){this.save()}};var d=[];function L(ar,aq,am,ao){ao=ao||"system";if(!D){d.push([ar,aq,am,ao]);return}var an={};y(an,b);an.d=aq;an.type=ar;an.channel=ao;O(ar,aq);var ap=Y(an);Q(ap);if(am){setTimeout(am,U.callback_timeout)}}function i(){for(var an=0;an<d.length;an++){var am=d[an];L(am[0],am[1],am[2],am[3])}}function Y(am){return ae.encode(N(am))}function Q(ap){var am={};am.data=ap;am.rnd=aj(6);am.enc=b.enc;var aq=U.endpoint;var ao=aq+"v"+U.api_version+"/"+U.key+"/event.gif?"+N(am);var an=new Image();an.src=ao}function P(ap){var aq="om_"+aj(5);var ar=document.createElement("iframe");ar.style.width="1px";ar.style.height="1px";ar.style.position="absolute";ar.style.top="0px";ar.style.right="0px";ar.style.visibility="hidden";document.body.appendChild(ar);ar.id=aq;var am=ar.contentDocument?ar.contentDocument:ar.contentWindow.document;am.open();am.close();var ao=am.createElement("form");ao.method="post";ao.action=U.endpoint+"v"+U.api_version+"/"+U.key+"/event.html";var an=am.createElement("input");an.name="data";an.value=ap;ao.appendChild(an);var an=am.createElement("input");an.name="rnd";an.value=aj(6);ao.appendChild(an);am.body.appendChild(ao);ao.submit();setTimeout(function(){ar.parentNode.removeChild(ar)},2000)}function e(an,am){var ao=I(an,am);ao=x(ao,function(au,at){if(au===true){return""}if(au===false){return""}if(au===null){return""}return(au+"").replace("|","")});var aq=ao.join("|");if(aq=="|||||"){return""}var ap=new Date().getTime();var ar=Math.floor(ap/(1000*60*60*24));return aq+"|"+ar}function I(ap,ao){var aq=[null,null,null,null,null,null];if(ao){var ar=B(ao);aq[0]=ar;var an=al(ar,ao);if(an!==false){aq[2]="search";aq[1]=an[0];aq[4]=an[1]}}var am=K(ap);if(am.contains("gclid")){if(!aq[0]){aq[0]="google.com"}aq[2]="cpc";aq[4]="Google"}if(ao&&ao.indexOf("/aclk")>-1&&ao.indexOf("adurl=")>-1){aq[2]="cpc";aq[4]="Google"}if(am.contains("utm_term")){aq[1]=am.get("utm_term")}if(am.contains("utm_medium")){aq[2]=am.get("utm_medium")}if(am.contains("utm_campaign")){aq[3]=am.get("utm_campaign")}if(am.contains("utm_source")){aq[4]=am.get("utm_source")}if(am.contains("utm_content")){aq[5]=am.get("utm_content")}return aq}function al(ao,aq){var av="360.cn:q|about:terms|alice:qs|aol:q|aol:query|ask:q|avg:q|babylon:q|baidu:wd|biglobe:q|bing:q|cnn:query|comcast:q|conduit:q|daum:q|eniro:search_word|go.mail.ru:q|goo.ne:MT|google:q|images.google:q|incredimail:q|kvasir:q|live:q|lycos:q|lycos:query|mamma:q|msn:q|najdi:q|naver:query|netscape:query|onet:qt|ozu:q|pchome:q|rakuten:qt|rambler:query|search-results:q|search.centrum.cz:q|seznam:q|startsiden:q|terra:query|virgilio:qs|voila:rdata|wp:szukaj|yahoo:p|yahoo:q|yam:k|yandex:text".split("|");var au=K(aq);var an="."+ao+".";for(var at=0;at<av.length;at++){var aw=av[at].split(":");var ar="."+aw[0]+".";var ap=aw[1];if(an.indexOf(ar)>-1){var am=aw[0];am=am.charAt(0).toUpperCase()+am.slice(1);if(au.contains(ap)){return[au.get(ap)||null,am]}}}if(an.indexOf(".google.")===0){return["NOT_SUPPLIED","Google"]}return false}function H(aq,an,am,ap){var ao="";if(am.contains("mc_cid")){ao="mc:"+am.get("mc_cid")}if(U.external_campaign_plugins.indexOf("dotmailer")!==-1){if(am.contains("utm_medium")&&am.contains("utm_campaign")&&am.get("utm_medium")=="email"){var au=am.get("utm_campaign").split("_");if(au.length>1){ao="dm:"+au[0]}}}for(var at=0;at<u.length;at++){var ar=u[at](aq,an,am,ap);if(ar){ar=ao}}if(ao||ap){M.set("ecamp",ao)}}function f(){this.lis=[];this.total=0;this.size=0;this.id=null;this.cur="";this.p={}}f.prototype.setData=function(an){for(var am in an){this[am]=an[am]}};f.prototype.setProperties=function(am){this.p=am};f.prototype.addLineItem=function(am,ap,ao,an){this.lis.push({pid:am,q:ap,tot:ao,p:an||{}});this.size+=ap};f.prototype.setTotal=function(an,am){this.total=an;this.cur=am};f.prototype.setId=function(am){this.id=am};f.prototype.signature=function(){return this.size+"|"+this.total};if((typeof U.cookie_domain=="undefined")||!U.cookie_domain){U.cookie_domain="."+B(ag())}var b={};var ab={};var af=null;var M=new s("ometria",365,U.cookie_domain);(function(){var ao=function(){var ar=g("OMud");try{return ar?JSON.parse(ar):null}catch(aq){return null}};var ap=g("OMuser");var am=ao();if(ap){M.existed=true;var an=ap.split("|");M.set("cid",an[0]);M.set("sid",an[1]);M.set("slt",parseInt(an[2]));M.set("nses",parseInt(an[3]));M.set("src",(an[4]||"").replace(/\*/g,"|"));z("OMuser")}if(am){M.existed=true;M.set("uiid",am.id);z("OMud")}M.saveIfDirty()})();function A(){b.cor=aj(16);v();T();R();w()}function C(){var an=aj(16);M.set("cid",an);b.cid=an;M.set("nses",0);var am=Math.floor((new Date()).getTime()/1000);M.set("osts",am);b.cnew=1}function v(){if(!M.get("cid")){o("NEW USER");C()}b.cid=M.get("cid");b.uiid=M.get("uiid")}function w(){b.url=ag()}function T(){function am(){return !!("ontouchstart" in window)||!!("onmsgesturechange" in window)}b.dtouch=am()?1:0;b.dsize=screen.width+"x"+screen.height;b.enc=(document.characterSet||document.charset)}function R(){var an=ag();var av=ag(document.referrer);if(av==an){av=null}var ax=B(an);var ao=B(av);var aB=aa(window.location.search);if(aB.contains("om_user")){window.setTimeout(function(){ometria.identify(aB.get("om_user"));if(window.history&&window.history.replaceState){window.history.replaceState({},"",location.href.replace(/om_user=[^&]+&?/,""))}},100)}else{if(aB.contains("kmi")){window.setTimeout(function(){ometria.identify(aB.get("kmi"))},100)}}var ar=Math.floor((new Date()).getTime()/1000);var am=M.getInt("slt",0);var aw=ar-am;var aq=false;var az=false;if(aw>=U.session_timeout){az=true}if(av&&(ax!=ao)){aq=true;b.rurl=av;if(aw>600){az=true}if(aB.contains("utm_nooverride")){az=false}for(var ay=0;ay<U.payment_domains.length;ay++){if(ao.indexOf(U.payment_domains[ay])>-1){az=false}}}if(av&&(ax==ao)){if(aw<U.session_timeout*1.95){az=false}}if(aw<=600){az=false}if(b.cnew){az=true}if(az){b.snew=1;var au=U.key;var ap=aj(12);var aA=((new Date().getTime())/1000)-1388534400;aA=Math.floor(aA/(24*3600*30));var at=au.substring(0,3)+au.substring(au.length-3);M.set("sid",at+aA+ap);o("NEW SESSION: "+M.get("sid"));M.inc("nses");M.set("npv",0);if(!av||aq){var aC=e(an,av);if(aC){M.set("src",aC);if(b.cnew){M.set("osrc",aC)}}}}else{var aC=e(an,av);if(aC&&(aC.indexOf("om_")>-1)){M.set("src",aC)}o("EXISTING SESSION: "+M.get("sid"))}M.set("slt",ar);b.tlast=aw;b.sid=M.get("sid");b.nses=M.getInt("nses");b.src=M.get("src");b.osrc=M.get("osrc");b.osts=M.get("osts");H(an,av,aB,az);b.ecamp=M.get("ecamp","")}A();M.save();var D=false;var F=false;var Z=b.nses&&(b.nses<=1);var ai=null;var ad={};var a=[];F=true;a.push(function(){try{if(typeof $!="function"){return}if(typeof $$!="function"){return}function ao(ar){var at=function(){try{ar()}catch(au){}};if(document.loaded){at()}else{document.observe("dom:loaded",at)}}var am=$$("body")[0];if(am&&!af){var ap=am.className||"";if(ap.indexOf("cms-index-noroute")>-1||ap.indexOf("cms-no-route")>-1){af="error";ab.error="Not found"}if(ap.indexOf("catalog-product-view")>-1){af="product";var an=null;try{an=$$("form[action*=/product/][action*=/checkout/cart/add]")[0].action.split("/product/")[1].split("/")[0]}catch(aq){}if(an){ab.pid=an}}if(ap.indexOf("catalog-category-view")>-1){af="listing"}if(ap.indexOf("catalogsearch-result-index")>-1){af="listing"}if(ap.indexOf("cms-home")>-1){af="homepage"}}ao(function(){if(typeof productAddToCartForm!="undefined"){var aw=window.productAddToCartForm;if(!aw._submit){aw._submit=aw.submit;aw.submit=function(aA,az){if(!aw.validator.validate()){try{ometria.track("addtobasket:fail",{pid:ometria_pageview_data.id})}catch(aB){}return}try{ometria.trackAddToBasket(ab.pid)}catch(aB){}setTimeout(function(){aw._submit(aA,az)},75)}}}var at=[];try{at=$$("[onclick*=checkout/cart/add]","[href*=checkout/cart/add]")}catch(ax){at=$$("[href*=checkout/cart/add]")}if(at.length>0){for(var au=0;au<at.length;au++){var av=at[au];var ay=av.onclick+" "+av.href;var ar=ay.match(/product\/([0-9]+)[^0-9]/)[1];if(ar){av.observe("click",function(){try{ometria.trackAddToBasket(ar)}catch(az){}})}}}})}catch(aq){ac(aq)}});a.push(function(){try{if(typeof $!="function"){return}if(typeof $$!="function"){return}function am(ao){var ap=function(){try{ao()}catch(aq){}};if(document.loaded){ap()}else{document.observe("dom:loaded",ap)}}am(function(){$$(".pushProduit[data-id]").each(function(ao){ao.observe("click",function(){try{var ap=this.readAttribute("data-id");if(ap&&ometria){ometria.viewProduct(ap)}}catch(aq){}})})})}catch(an){ac(an)}});F=true;a.push(function(){try{function ao(at){if(!at.product){return null}var au={};au.pid=at.product.id;au.q=at.quantity;return au}function ar(au){var av=new f();if(!au){return av}av.setId(au.id);av.setTotal(au.total,au.currency);if(au.line_items&&au.line_items.length>0){for(var aw=0;aw<au.line_items.length;aw++){var at=au.line_items[aw];if(at.product){av.addLineItem(at.product.id,at.quantity,at.subtotal)}}}return av}var an=window.universal_variable;if(!an){return}if(!an.page){return}var am=null;if(an.page.category){am=an.page.category}if(am==null&&window.location.pathname=="/"){am="homepage"}if(am=="category"){am="listing"}if(an.page["om:site"]){b.site=an.page["om:site"]}if(am=="product"){af="product";ab.pid=an.product.id}if(am=="search"){af="listing";var ap=null;if(an.page["om:query"]){ap=an.page["om:query"]}if(an.listing&&an.listing.query){ap=an.listing.query}ab.search=ap}if(am=="homepage"||am=="listing"||am=="basket"||am=="category"||am=="checkout"||am=="confirmation"){af=am}if(am=="basket"&&!an.basket){ometria.track("basket:empty")}if(an.user&&an.user.email){ometria.identify(an.user.email)}if(an.basket){ometria.setBasket(ar(an.basket))}if(an.transaction){ometria.trackTransaction(an.transaction.order_id)}}catch(aq){ac(aq)}});ad.Basket=f;ad.track=function(an,ao,am){L(an,ao,am,"custom")};ad.trackAddToBasket=function(am,an,ao){an=an||1;ao=ao||{};ao.pid=am;ao.q=an;L("addtobasket",ao)};ad.isNewVisitor=function(){return Z};ad.basket=null;ad.setBasket=function(ao){var am=M.get("bskt");var an=ao?ao.signature():"";this.basket=ao;if(am==an){return}M.set("bskt",an);L("setbasket",ao)};ad.getBasket=function(){return this.basket};ad.trackCheckout=function(am,an){an=an||{};an.stage=am;L("checkout",an)};ad.trackTransaction=function(an,am){am=am||{};am.tid=an;L("transaction",am);if(U.key=="roseandgrey"){X("https://i.ctnsnet.com/int/integration?pixel=2596800&nid=304041&cont=i")}};ad.pageview=function(am,an,ao){b.url=am;if(an=="landing"){an="homepage"}if(am!=ai){ai=am;M.inc("npv");b.npv=M.getInt("npv")}ao.rurl=ag(document.referrer);ao.type=an;L("pageview",ao)};ad.viewProducts=function(am){};ad.viewProduct=function(am){L("viewproduct",{pid:am})};ad.event=function(ao,am,an){};ad.identify=function(ar,at,an){at=at||{};var aq={};if(at){aq.profile=at}if(!S(ar)){return}var ao=this.getIdentity();var ap=true;var am=false;if(ao&&ar==ao){ap=false}if(ap&&ao){am=true}if(ap){aq.uiid=ar;b.uiid=ar;if(am){o("CHANGED IDENTITY");C();b.cnew=0;M.set("osrc",M.get("src"));M.set("nses",1)}L("identify",aq,null);M.set("uiid",ar)}};ad.setProfileData=function(an){an=an||{};var am={};if(an){am.profile=an}am.uiid=ometria.getIdentity();if(!am.uiid){return}L("profile",am,null)};ad.getIdentity=function(){return M.get("uiid")||null};ad.setPageType=function(am){af=am};ad.setPageData=function(am){ab=am};ad.linkSession=function(am){b.lnk=am?"dsig":""};ad.init=function(an,ao,am){if(am){b.site=am}if(document.body){ad.init2(an,ao)}else{setTimeout(function(){ad.init(an,ao)},25)}};ad.init2=function(aq,ar){af=aq||null;ab=ar||{};for(var ao=0;ao<a.length;ao++){a[ao]()}var am=ag();if(U.page_types){for(var ao=0;ao<U.page_types.length;ao++){var an=U.page_types[ao];var ap=new RegExp(an.pattern,"g");if(am.match(ap)){af=an.type}}}D=true;this.pageview(am,af,ab);i()};ad._debug=function(){var am={sessionId:b.sid,cookieId:b.cid,userIdentity:b.uiid,extra:b};return am};ad._log=function(){return _log};if(typeof window.ometria=="undefined"){window.ometria={}}y(window.ometria,ad);if(F){ometria.init()}else{if(typeof ometria.onLoad=="function"){ometria.onLoad()}}})();